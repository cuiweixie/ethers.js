<!DOCTYPE html>
<html class="paged">
  <head>
    <title>Example: ERC-20 Contract</title>
    <link rel="stylesheet" type="text/css" href="/v5/static/style.css">
    <meta property="og:title" content="Example: ERC-20 Contract"/>
    <meta charset="UTF-8">
    <meta property="og:description" content="Documentation for ethers, a complete, tiny and simple Ethereum library."/>
    
    <meta property="og:image" content="/v5/static/social.jpg"/>
    
  </head>
  <body>
    <div class="sidebar">
      <div class="header">
        <div class="logo"><a href="/v5/"><div class="image"></div><div class="name">ethers</div><div class="version">v5.4</div></a></div>
        <div class="search"><form action="/v5/search/" method="GET"><input name="search" id="search" /></form><span class="search-icon">&#9906;</span></div>
      </div>
      <div class="toc"><div>
        <div class="link title"><a href="/v5/">ethers.js中文文档</a></div><div class="base show link depth-1"><a href="/v5/getting-started/">开始使用</a></div><div class="base show link depth-1"><a href="/v5/concepts/">以太坊基础知识</a></div><div class="hide link depth-2"><a href="/v5/concepts/events/">事件</a></div><div class="hide link depth-2"><a href="/v5/concepts/gas/">Gas</a></div><div class="hide link depth-2"><a href="/v5/concepts/security/">Security</a></div><div class="hide link depth-2"><a href="/v5/concepts/best-practices/">Best Practices</a></div><div class="base show link depth-1"><a href="/v5/api-keys/">Provider API Keys</a></div><div class="base ancestor show link depth-1"><a href="/v5/api/">Application Programming Interface</a></div><div class="show link depth-2"><a href="/v5/api/providers/">Providers</a></div><div class="hide link depth-3"><a href="/v5/api/providers/provider/">Provider</a></div><div class="hide link depth-3"><a href="/v5/api/providers/jsonrpc-provider/">JsonRpcProvider</a></div><div class="hide link depth-3"><a href="/v5/api/providers/api-providers/">API Providers</a></div><div class="hide link depth-3"><a href="/v5/api/providers/other/">Other Providers</a></div><div class="hide link depth-3"><a href="/v5/api/providers/types/">Types</a></div><div class="show link depth-2"><a href="/v5/api/signer/">Signers</a></div><div class="ancestor show link depth-2"><a href="/v5/api/contract/">Contract Interaction</a></div><div class="show link depth-3"><a href="/v5/api/contract/contract/">Contract</a></div><div class="show link depth-3"><a href="/v5/api/contract/contract-factory/">ContractFactory</a></div><div class="myself ancestor ancestor show link depth-3"><a href="/v5/api/contract/example/">Example: ERC-20 Contract</a></div><div class="link show child depth-4"><a href="#example-erc-20-contract--deploying-a-contract">Deploying a Contract</a></div><div class="link show child depth-4"><a href="#example-erc-20-contract--connecting-to-a-contract">Connecting to a Contract</a></div><div class="link show child depth-4"><a href="#example-erc-20-contract--properties">Properties</a></div><div class="link show child depth-4"><a href="#example-erc-20-contract--methods">Methods</a></div><div class="link show child depth-4"><a href="#erc20-events">Events</a></div><div class="link show child depth-4"><a href="#erc20-meta-methods">Meta-Class Methods</a></div><div class="link show child depth-4"><a href="#erc20-meta-events">Meta-Class Filters</a></div><div class="show link depth-2"><a href="/v5/api/utils/">Utilities</a></div><div class="hide link depth-3"><a href="/v5/api/utils/abi/">Application Binary Interface</a></div><div class="hide link depth-4"><a href="/v5/api/utils/abi/coder/">AbiCoder</a></div><div class="hide link depth-4"><a href="/v5/api/utils/abi/formats/">ABI Formats</a></div><div class="hide link depth-4"><a href="/v5/api/utils/abi/fragments/">Fragments</a></div><div class="hide link depth-4"><a href="/v5/api/utils/abi/interface/">Interface</a></div><div class="hide link depth-3"><a href="/v5/api/utils/address/">Addresses</a></div><div class="hide link depth-3"><a href="/v5/api/utils/bignumber/">BigNumber</a></div><div class="hide link depth-3"><a href="/v5/api/utils/bytes/">Byte Manipulation</a></div><div class="hide link depth-3"><a href="/v5/api/utils/constants/">Constants</a></div><div class="hide link depth-3"><a href="/v5/api/utils/display-logic/">Display Logic and Input</a></div><div class="hide link depth-3"><a href="/v5/api/utils/encoding/">Encoding Utilities</a></div><div class="hide link depth-3"><a href="/v5/api/utils/fixednumber/">FixedNumber</a></div><div class="hide link depth-3"><a href="/v5/api/utils/hashing/">Hashing Algorithms</a></div><div class="hide link depth-3"><a href="/v5/api/utils/hdnode/">HD Wallet</a></div><div class="hide link depth-3"><a href="/v5/api/utils/logger/">Logging</a></div><div class="hide link depth-3"><a href="/v5/api/utils/properties/">Property Utilities</a></div><div class="hide link depth-3"><a href="/v5/api/utils/signing-key/">Signing Key</a></div><div class="hide link depth-3"><a href="/v5/api/utils/strings/">Strings</a></div><div class="hide link depth-3"><a href="/v5/api/utils/transactions/">Transactions</a></div><div class="hide link depth-3"><a href="/v5/api/utils/web/">Web Utilities</a></div><div class="hide link depth-3"><a href="/v5/api/utils/wordlists/">Wordlists</a></div><div class="show link depth-2"><a href="/v5/api/other/">Other Libraries</a></div><div class="hide link depth-3"><a href="/v5/api/other/assembly/">Assembly</a></div><div class="hide link depth-4"><a href="/v5/api/other/assembly/dialect/">Ethers ASM Dialect</a></div><div class="hide link depth-4"><a href="/v5/api/other/assembly/api/">Utilities</a></div><div class="hide link depth-4"><a href="/v5/api/other/assembly/ast/">Abstract Syntax Tree</a></div><div class="hide link depth-3"><a href="/v5/api/other/hardware/">Hardware Wallets</a></div><div class="show link depth-2"><a href="/v5/api/experimental/">Experimental</a></div><div class="base show link depth-1"><a href="/v5/cli/">Command Line Interfaces</a></div><div class="hide link depth-2"><a href="/v5/cli/ethers/">Sandbox Utility</a></div><div class="hide link depth-2"><a href="/v5/cli/asm/">Assembler</a></div><div class="hide link depth-2"><a href="/v5/cli/ens/">Ethereum Naming Service</a></div><div class="hide link depth-2"><a href="/v5/cli/typescript/">TypeScript</a></div><div class="hide link depth-2"><a href="/v5/cli/plugin/">Making Your Own</a></div><div class="base show link depth-1"><a href="/v5/cookbook/">Cookbook</a></div><div class="hide link depth-2"><a href="/v5/cookbook/react-native/">React Native (and ilk)</a></div><div class="hide link depth-2"><a href="/v5/cookbook/transactions/">Transactions</a></div><div class="base show link depth-1"><a href="/v5/migration/">Migration Guide</a></div><div class="hide link depth-2"><a href="/v5/migration/web3/">Migration: From Web3.js</a></div><div class="hide link depth-2"><a href="/v5/migration/ethers-v4/">Migration: From Ethers v4</a></div><div class="base show link depth-1"><a href="/v5/testing/">Testing</a></div><div class="base show link depth-1"><a href="/v5/contributing/">Contributing and Hacking</a></div><div class="base show link depth-1"><a href="/v5/other-resources/">Other Resources</a></div><div class="base show link depth-1"><a href="/v5/documentation/">Flatworm Docs</a></div><div class="base show link depth-1"><a href="/v5/license/">License and Copyright</a></div>
      </div></div>
      <div class="footer">
        <a href="/v5/single-page/">Single Page</a>
      </div>
    </div>
    <div class="content">
      <div class="breadcrumbs"><a href="/v5/">ethers.js中文文档</a>&nbsp;&nbsp;&raquo;&nbsp;&nbsp;<a href="/v5/api/">API</a>&nbsp;&nbsp;&raquo;&nbsp;&nbsp;<a href="/v5/api/contract/">Contract Interaction</a>&nbsp;&nbsp;&raquo;&nbsp;&nbsp;<span class="current">Example: ERC-20 Contract</span></div>

<a name="example-erc-20-contract"></a><h1 class="show-anchors"><div>Example: ERC-20 Contract<div class="anchors"><a class="self" href="/v5/api/contract/example/#example-erc-20-contract"></a></div></div></h1><p>The concept of Meta-Classes is somewhat confusing, so we will go over a short example.</p>

<p>A meta-class is a class which is defined at run-time. A Contract is specified by an <i>Application Binary Interface</i> (ABI), which describes the methods and events it has. This description is passed the the <a href="/v5/api/contract/contract/">Contract</a> object at run-time, and it creates a new Class, adding all the methods defined in the ABI at run-time.</p>

<a name="example-erc-20-contract--deploying-a-contract"></a><h2 class="show-anchors"><div>Deploying a Contract<div class="anchors"><a class="self" href="/v5/api/contract/example/#example-erc-20-contract--deploying-a-contract"></a></div></div></h2><p>Most often, any contract you will need to interact with will already be deployed to the blockchain, but for this example will will first deploy the contract.</p>

<div class="property show-anchors"><div class="signature"><span class="modifier">new </span><span class="path">ethers</span><span class="symbol">.</span><span class="method">ContractFactory</span><span class="symbol">(</span> <span class="param">abi</span> <span class="symbol">,</span> <span class="param">bytecode</span> <span class="symbol">,</span> <span class="param">signer</span> <span class="symbol">)</span><div class="anchors"></div></div><div class="body"><p>Create a new <a href="/v5/api/contract/contract-factory/">ContractFactory</a> which can deploy a contract to the blockchain.</p>

</div></div><div class="code">const bytecode = "0x608060405234801561001057600080fd5b506040516103bc3803806103bc83398101604081905261002f9161007c565b60405181815233906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a333600090815260208190526040902055610094565b60006020828403121561008d578081fd5b5051919050565b610319806100a36000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c8063313ce5671461005157806370a082311461006557806395d89b411461009c578063a9059cbb146100c5575b600080fd5b604051601281526020015b60405180910390f35b61008e610073366004610201565b6001600160a01b031660009081526020819052604090205490565b60405190815260200161005c565b604080518082018252600781526626bcaa37b5b2b760c91b6020820152905161005c919061024b565b6100d86100d3366004610222565b6100e8565b604051901515815260200161005c565b3360009081526020819052604081205482111561014b5760405162461bcd60e51b815260206004820152601a60248201527f696e73756666696369656e7420746f6b656e2062616c616e6365000000000000604482015260640160405180910390fd5b336000908152602081905260408120805484929061016a9084906102b6565b90915550506001600160a01b0383166000908152602081905260408120805484929061019790849061029e565b90915550506040518281526001600160a01b0384169033907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a350600192915050565b80356001600160a01b03811681146101fc57600080fd5b919050565b600060208284031215610212578081fd5b61021b826101e5565b9392505050565b60008060408385031215610234578081fd5b61023d836101e5565b946020939093013593505050565b6000602080835283518082850152825b818110156102775785810183015185820160400152820161025b565b818111156102885783604083870101525b50601f01601f1916929092016040019392505050565b600082198211156102b1576102b16102cd565b500190565b6000828210156102c8576102c86102cd565b500390565b634e487b7160e01b600052601160045260246000fdfea2646970667358221220d80384ce584e101c5b92e4ee9b7871262285070dbcd2d71f99601f0f4fcecd2364736f6c63430008040033";

<span class="comment">// A Human-Readable ABI; we only need to specify relevant fragments,
</span><span class="comment">// in the case of deployment this means the constructor
</span>const abi = [
    "constructor(uint totalSupply)"
];

const factory = new ethers.ContractFactory(abi, bytecode, signer)

<span class="comment">// Deploy, setting total supply to 100 tokens (assigned to the deployer)
</span>const contract = await factory.deploy(parseUnits("100"));

<span class="comment">// The contract is not currentl live on the network yet, however
</span><span class="comment">// its address is ready for us
</span>contract.address
<span class="result ok">// '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d'
</span>
<span class="comment">// Wait until the contract has been deployed before interacting
</span><span class="comment">// with it; returns the receipt for the deployemnt transaction
</span>await contract.deployTransaction.wait();
<span class="result ok">// {
</span><span class="result ok">//   blockHash: '0xac72a683d46dc683fcd986b2e889fb05e9b52ccbdb26e97168cfa4a36c700432',
</span><span class="result ok">//   blockNumber: 155,
</span><span class="result ok">//   byzantium: true,
</span><span class="result ok">//   confirmations: 1,
</span><span class="result ok">//   contractAddress: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//   cumulativeGasUsed: { BigNumber: "250842" },
</span><span class="result ok">//   effectiveGasPrice: { BigNumber: "2500000008" },
</span><span class="result ok">//   events: [
</span><span class="result ok">//     {
</span><span class="result ok">//       address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//       blockHash: '0xac72a683d46dc683fcd986b2e889fb05e9b52ccbdb26e97168cfa4a36c700432',
</span><span class="result ok">//       blockNumber: 155,
</span><span class="result ok">//       data: '0x0000000000000000000000000000000000000000000000056bc75e2d63100000',
</span><span class="result ok">//       getBlock: [Function],
</span><span class="result ok">//       getTransaction: [Function],
</span><span class="result ok">//       getTransactionReceipt: [Function],
</span><span class="result ok">//       logIndex: 0,
</span><span class="result ok">//       removeListener: [Function],
</span><span class="result ok">//       topics: [
</span><span class="result ok">//         '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//         '0x0000000000000000000000000000000000000000000000000000000000000000',
</span><span class="result ok">//         '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20'
</span><span class="result ok">//       ],
</span><span class="result ok">//       transactionHash: '0xe398d009f6289cf3cbcbd44eafda048498335ec0d8a4a252552144b91c7c4b81',
</span><span class="result ok">//       transactionIndex: 0
</span><span class="result ok">//     }
</span><span class="result ok">//   ],
</span><span class="result ok">//   from: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//   gasUsed: { BigNumber: "250842" },
</span><span class="result ok">//   logs: [
</span><span class="result ok">//     {
</span><span class="result ok">//       address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//       blockHash: '0xac72a683d46dc683fcd986b2e889fb05e9b52ccbdb26e97168cfa4a36c700432',
</span><span class="result ok">//       blockNumber: 155,
</span><span class="result ok">//       data: '0x0000000000000000000000000000000000000000000000056bc75e2d63100000',
</span><span class="result ok">//       logIndex: 0,
</span><span class="result ok">//       topics: [
</span><span class="result ok">//         '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//         '0x0000000000000000000000000000000000000000000000000000000000000000',
</span><span class="result ok">//         '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20'
</span><span class="result ok">//       ],
</span><span class="result ok">//       transactionHash: '0xe398d009f6289cf3cbcbd44eafda048498335ec0d8a4a252552144b91c7c4b81',
</span><span class="result ok">//       transactionIndex: 0
</span><span class="result ok">//     }
</span><span class="result ok">//   ],
</span><span class="result ok">//   logsBloom: '0x00000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000008000000000000001000000000000000000000001000000000020000000000000000000800000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000',
</span><span class="result ok">//   status: 1,
</span><span class="result ok">//   to: null,
</span><span class="result ok">//   transactionHash: '0xe398d009f6289cf3cbcbd44eafda048498335ec0d8a4a252552144b91c7c4b81',
</span><span class="result ok">//   transactionIndex: 0,
</span><span class="result ok">//   type: 2
</span><span class="result ok">// }
</span></div><a name="example-erc-20-contract--connecting-to-a-contract"></a><h2 class="show-anchors"><div>Connecting to a Contract<div class="anchors"><a class="self" href="/v5/api/contract/example/#example-erc-20-contract--connecting-to-a-contract"></a></div></div></h2>
<a name="example-erc-20-contract--connecting-to-a-contract--erc20contract"></a><h3 class="show-anchors"><div>ERC20Contract<span class="inherits"> inherits <a href="/v5/api/contract/contract/">Contract</a></span><div class="anchors"><a class="self" href="/v5/api/contract/example/#example-erc-20-contract--connecting-to-a-contract--erc20contract"></a></div></div></h3>
<div class="property show-anchors"><div class="signature"><span class="modifier">new </span><span class="path">ethers</span><span class="symbol">.</span><span class="method">Contract</span><span class="symbol">(</span> <span class="param">address</span> <span class="symbol">,</span> <span class="param">abi</span> <span class="symbol">,</span> <span class="param">providerOrSigner</span> <span class="symbol">)</span><div class="anchors"></div></div><div class="body"><p>Creating a new instance of a Contract connects to an existing contract by specifying its <i>address</i> on the blockchain, its <i>abi</i> (used to populate the class' methods) a <i>providerOrSigner</i>.</p>

<p>If a <a href="/v5/api/providers/provider/">Provider</a> is given, the contract has only read-only access, while a <a href="/v5/api/signer/#Signer">Signer</a> offers access to state manipulating methods.</p>

</div></div><div class="code"><span class="comment">// A Human-Readable ABI; for interacting with the contract, we
</span><span class="comment">// must include any fragment we wish to use
</span>const abi = [
<span class="comment">    // Read-Only Functions
</span>    "function balanceOf(address owner) view returns (uint256)",
    "function decimals() view returns (uint8)",
    "function symbol() view returns (string)",

<span class="comment">    // Authenticated Functions
</span>    "function transfer(address to, uint amount) returns (bool)",

<span class="comment">    // Events
</span>    "event Transfer(address indexed from, address indexed to, uint amount)"
];

<span class="comment">// This can be an address or an ENS name
</span>const address = "0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d";

<span class="comment">// Read-Only; By connecting to a Provider, allows:
</span><span class="comment">// - Any constant function
</span><span class="comment">// - Querying Filters
</span><span class="comment">// - Populating Unsigned Transactions for non-constant methods
</span><span class="comment">// - Estimating Gas for non-constant (as an anonymous sender)
</span><span class="comment">// - Static Calling non-constant methods (as anonymous sender)
</span>const erc20 = new ethers.Contract(address, abi, provider);

<span class="comment">// Read-Write; By connecting to a Signer, allows:
</span><span class="comment">// - Everything from Read-Only (except as Signer, not anonymous)
</span><span class="comment">// - Sending transactions for non-constant functions
</span>const erc20_rw = new ethers.Contract(address, abi, signer);
</div><a name="example-erc-20-contract--properties"></a><h2 class="show-anchors"><div>Properties<span class="inherits">(inheritted from <a href="/v5/api/contract/contract/">Contract</a>)</span><div class="anchors"><a class="self" href="/v5/api/contract/example/#example-erc-20-contract--properties"></a></div></div></h2>
<div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">address</span> <span class="arrow">&rArr;</span> <span class="returns">string&lt; <a href="/v5/api/utils/address/#address">Address</a> &gt;</span><div class="anchors"></div></div><div class="body"><p>This is the address (or ENS name) the contract was constructed with.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">resolvedAddress</span> <span class="arrow">&rArr;</span> <span class="returns">string&lt; <a href="/v5/api/utils/address/#address">Address</a> &gt;</span><div class="anchors"></div></div><div class="body"><p>This is a promise that will resolve to the address the <b>Contract</b> object is attached to. If an <a href="/v5/api/utils/address/#address">Address</a> was provided to the constructor, it will be equal to this; if an ENS name was provided, this will be the resolved address.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">deployTransaction</span> <span class="arrow">&rArr;</span> <span class="returns"><a href="/v5/api/providers/types/#providers-TransactionResponse">TransactionResponse</a></span><div class="anchors"></div></div><div class="body"><p>If the <b>Contract</b> object is the result of a ContractFactory deployment, this is the transaction which was used to deploy the contract.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">interface</span> <span class="arrow">&rArr;</span> <span class="returns"><a href="/v5/api/utils/abi/interface/">Interface</a></span><div class="anchors"></div></div><div class="body"><p>This is the ABI as an <a href="/v5/api/utils/abi/interface/">Interface</a>.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">provider</span> <span class="arrow">&rArr;</span> <span class="returns"><a href="/v5/api/providers/provider/">Provider</a></span><div class="anchors"></div></div><div class="body"><p>If a provider was provided to the constructor, this is that provider. If a signer was provided that had a <a href="/v5/api/providers/provider/">Provider</a>, this is that provider.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">signer</span> <span class="arrow">&rArr;</span> <span class="returns"><a href="/v5/api/signer/#Signer">Signer</a></span><div class="anchors"></div></div><div class="body"><p>If a signer was provided to the constructor, this is that signer.</p>

</div></div><a name="example-erc-20-contract--methods"></a><h2 class="show-anchors"><div>Methods<span class="inherits">(inheritted from <a href="/v5/api/contract/contract/">Contract</a>)</span><div class="anchors"><a class="self" href="/v5/api/contract/example/#example-erc-20-contract--methods"></a></div></div></h2>
<div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">attach</span><span class="symbol">(</span> <span class="param">addressOrName</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns"><a href="/v5/api/contract/contract/">Contract</a></span><div class="anchors"></div></div><div class="body"><p>Returns a new instance of the <b>Contract</b> attached to a new address. This is useful if there are multiple similar or identical copies of a Contract on the network and you wish to interact with each of them.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">connect</span><span class="symbol">(</span> <span class="param">providerOrSigner</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns"><a href="/v5/api/contract/contract/">Contract</a></span><div class="anchors"></div></div><div class="body"><p>Returns a new instance of the Contract, but connected to <i>providerOrSigner</i>.</p>

<p>By passing in a <a href="/v5/api/providers/provider/">Provider</a>, this will return a downgraded <b>Contract</b> which only has read-only access (i.e. constant calls).</p>

<p>By passing in a <a href="/v5/api/signer/#Signer">Signer</a>. this will return a <b>Contract</b> which will act on behalf of that signer.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">deployed</span><span class="symbol">(</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; Contract &gt;</span><div class="anchors"></div></div><div class="body">
</div></div><div class="property show-anchors"><div class="signature"><span class="path">Contract</span><span class="symbol">.</span><span class="method">isIndexed</span><span class="symbol">(</span> <span class="param">value</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">boolean</span><div class="anchors"></div></div><div class="body">
</div></div><a name="erc20-events"></a><a name="example-erc-20-contract--erc20-events"></a><h2 class="show-anchors"><div>Events<span class="inherits">(inheritted from <a href="/v5/api/contract/contract/">Contract</a>)</span><div class="anchors"><a class="self" href="/v5/api/contract/example/#erc20-events"></a></div></div></h2><p>See <a href="/v5/api/contract/example/#erc20-meta-events">Meta-Class Filters</a> for examples using events.</p>

<a name="erc20-queryfilter"></a><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">queryFilter</span><span class="symbol">(</span> <span class="param">event</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">fromBlockOrBlockHash</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">toBlock</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; Array&lt; Event &gt; &gt;</span><div class="anchors"><a class="self" href="/v5/api/contract/example/#erc20-queryfilter"></a></div></div><div class="body"><p>Return Events that match the <i>event</i>.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">listenerCount</span><span class="symbol">(</span> <span class="symbol">[</span> <span class="param">event</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">number</span><div class="anchors"></div></div><div class="body"><p>Return the number of listeners that are subscribed to <i>event</i>. If no event is provided, returns the total count of all events.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">listeners</span><span class="symbol">(</span> <span class="param">event</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Array&lt; Listener &gt;</span><div class="anchors"></div></div><div class="body"><p>Return a list of listeners that are subscribed to <i>event</i>.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">off</span><span class="symbol">(</span> <span class="param">event</span> <span class="symbol">,</span> <span class="param">listener</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">this</span><div class="anchors"></div></div><div class="body"><p>Unsubscribe <i>listener</i> to <i>event</i>.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">on</span><span class="symbol">(</span> <span class="param">event</span> <span class="symbol">,</span> <span class="param">listener</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">this</span><div class="anchors"></div></div><div class="body"><p>Subscribe to <i>event</i> calling <i>listener</i> when the event occurs.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">once</span><span class="symbol">(</span> <span class="param">event</span> <span class="symbol">,</span> <span class="param">listener</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">this</span><div class="anchors"></div></div><div class="body"><p>Subscribe once to <i>event</i> calling <i>listener</i> when the event occurs.</p>

</div></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">removeAllListeners</span><span class="symbol">(</span> <span class="symbol">[</span> <span class="param">event</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">this</span><div class="anchors"></div></div><div class="body"><p>Unsubscribe all listeners for <i>event</i>. If no event is provided, all events are unsubscribed.</p>

</div></div><a name="erc20-meta-methods"></a><a name="example-erc-20-contract--erc20-meta-methods"></a><h2 class="show-anchors"><div>Meta-Class Methods<span class="inherits">(added at Runtime)</span><div class="anchors"><a class="self" href="/v5/api/contract/example/#erc20-meta-methods"></a></div></div></h2><p>Since the Contract is a Meta-Class, the methods available here depend on the ABI which was passed into the <b>Contract</b>.</p>

<div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">decimals</span><span class="symbol">(</span> <span class="symbol">[</span> <span class="param">overrides</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; number &gt;</span><div class="anchors"></div></div><div class="body"><p>Returns the number of decimal places used by this ERC-20 token. This can be used with <a href="/v5/api/utils/display-logic/#utils-parseUnits">parseUnits</a> when taking input from the user or [formatUnits](utils-formatunits] when displaying the token amounts in the UI.</p>

</div></div><div class="code">await erc20.decimals();
<span class="result ok">// 18
</span></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">balanceOf</span><span class="symbol">(</span> <span class="param">owner</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">overrides</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; <a href="/v5/api/utils/bignumber/">BigNumber</a> &gt;</span><div class="anchors"></div></div><div class="body"><p>Returns the balance of <i>owner</i> for this ERC-20 token.</p>

</div></div><div class="code">await erc20.balanceOf(signer.getAddress())
<span class="result ok">// { BigNumber: "100000000000000000000" }
</span></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="method">symbol</span><span class="symbol">(</span> <span class="symbol">[</span> <span class="param">overrides</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; string &gt;</span><div class="anchors"></div></div><div class="body"><p>Returns the symbol of the token.</p>

</div></div><div class="code">await erc20.symbol();
<span class="result ok">// 'MyToken'
</span></div><div class="property show-anchors"><div class="signature"><span class="path">erc20_rw</span><span class="symbol">.</span><span class="method">transfer</span><span class="symbol">(</span> <span class="param">target</span> <span class="symbol">,</span> <span class="param">amount</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">overrides</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; <a href="/v5/api/providers/types/#providers-TransactionResponse">TransactionResponse</a> &gt;</span><div class="anchors"></div></div><div class="body"><p>Transfers <i>amount</i> tokens to <i>target</i> from the current signer. The return value (a boolean) is inaccessible during a write operation using a transaction. Other techniques (such as events) are required if this value is required. On-chain contracts calling the <code class="inline">transfer</code> function have access to this result, which is why it is possible.</p>

</div></div><div class="code"><span class="comment">// Before...
</span>formatUnits(await erc20_rw.balanceOf(signer.getAddress()));
<span class="result ok">// '100.0'
</span>
<span class="comment">// Transfer 1.23 tokens to the ENS name "ricmoo.eth"
</span>tx = await erc20_rw.transfer("ricmoo.eth", parseUnits("1.23"));
<span class="result ok">// {
</span><span class="result ok">//   accessList: [],
</span><span class="result ok">//   chainId: 31337,
</span><span class="result ok">//   confirmations: 0,
</span><span class="result ok">//   data: '0xa9059cbb0000000000000000000000005555763613a12d8f3e73be831dff8598089d3dca0000000000000000000000000000000000000000000000001111d67bb1bb0000',
</span><span class="result ok">//   from: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//   gasLimit: { BigNumber: "51558" },
</span><span class="result ok">//   gasPrice: null,
</span><span class="result ok">//   hash: '0xe6a39827adf9c1a65fab139f30f68f85b398eab84971b7a838a56810ddcc75ff',
</span><span class="result ok">//   maxFeePerGas: { BigNumber: "2500000016" },
</span><span class="result ok">//   maxPriorityFeePerGas: { BigNumber: "2500000000" },
</span><span class="result ok">//   nonce: 2,
</span><span class="result ok">//   r: '0x1761da02d382a47c2287a60a3ca8fc9d4352522e1488df7b2b98b7e14a9642fa',
</span><span class="result ok">//   s: '0x39ebe02915f69ff3654a72f98481f9e4b08af6e69cc7e3d51486613c4d75fb8f',
</span><span class="result ok">//   to: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//   type: 2,
</span><span class="result ok">//   v: 0,
</span><span class="result ok">//   value: { BigNumber: "0" },
</span><span class="result ok">//   wait: [Function]
</span><span class="result ok">// }
</span>
<span class="comment">// Wait for the transaction to be mined...
</span>await tx.wait();
<span class="result ok">// {
</span><span class="result ok">//   blockHash: '0xe81a4efab651d041b0f76b26f9431dba64f98fc12155f49f959abd68fc9e60a1',
</span><span class="result ok">//   blockNumber: 156,
</span><span class="result ok">//   byzantium: true,
</span><span class="result ok">//   confirmations: 1,
</span><span class="result ok">//   contractAddress: null,
</span><span class="result ok">//   cumulativeGasUsed: { BigNumber: "51558" },
</span><span class="result ok">//   effectiveGasPrice: { BigNumber: "2500000008" },
</span><span class="result ok">//   events: [
</span><span class="result ok">//     {
</span><span class="result ok">//       address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//       args: [
</span><span class="result ok">//         '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//         '0x5555763613a12D8F3e73be831DFf8598089d3dCa',
</span><span class="result ok">//         { BigNumber: "1230000000000000000" },
</span><span class="result ok">//         amount: { BigNumber: "1230000000000000000" },
</span><span class="result ok">//         from: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//         to: '0x5555763613a12D8F3e73be831DFf8598089d3dCa'
</span><span class="result ok">//       ],
</span><span class="result ok">//       blockHash: '0xe81a4efab651d041b0f76b26f9431dba64f98fc12155f49f959abd68fc9e60a1',
</span><span class="result ok">//       blockNumber: 156,
</span><span class="result ok">//       data: '0x0000000000000000000000000000000000000000000000001111d67bb1bb0000',
</span><span class="result ok">//       decode: [Function],
</span><span class="result ok">//       event: 'Transfer',
</span><span class="result ok">//       eventSignature: 'Transfer(address,address,uint256)',
</span><span class="result ok">//       getBlock: [Function],
</span><span class="result ok">//       getTransaction: [Function],
</span><span class="result ok">//       getTransactionReceipt: [Function],
</span><span class="result ok">//       logIndex: 0,
</span><span class="result ok">//       removeListener: [Function],
</span><span class="result ok">//       topics: [
</span><span class="result ok">//         '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//         '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20',
</span><span class="result ok">//         '0x0000000000000000000000005555763613a12d8f3e73be831dff8598089d3dca'
</span><span class="result ok">//       ],
</span><span class="result ok">//       transactionHash: '0xe6a39827adf9c1a65fab139f30f68f85b398eab84971b7a838a56810ddcc75ff',
</span><span class="result ok">//       transactionIndex: 0
</span><span class="result ok">//     }
</span><span class="result ok">//   ],
</span><span class="result ok">//   from: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//   gasUsed: { BigNumber: "51558" },
</span><span class="result ok">//   logs: [
</span><span class="result ok">//     {
</span><span class="result ok">//       address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//       blockHash: '0xe81a4efab651d041b0f76b26f9431dba64f98fc12155f49f959abd68fc9e60a1',
</span><span class="result ok">//       blockNumber: 156,
</span><span class="result ok">//       data: '0x0000000000000000000000000000000000000000000000001111d67bb1bb0000',
</span><span class="result ok">//       logIndex: 0,
</span><span class="result ok">//       topics: [
</span><span class="result ok">//         '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//         '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20',
</span><span class="result ok">//         '0x0000000000000000000000005555763613a12d8f3e73be831dff8598089d3dca'
</span><span class="result ok">//       ],
</span><span class="result ok">//       transactionHash: '0xe6a39827adf9c1a65fab139f30f68f85b398eab84971b7a838a56810ddcc75ff',
</span><span class="result ok">//       transactionIndex: 0
</span><span class="result ok">//     }
</span><span class="result ok">//   ],
</span><span class="result ok">//   logsBloom: '0x00000000000000000800000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000008000000000000001000000000000000000000001000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000001000000000200000000000000000000000000000000000000',
</span><span class="result ok">//   status: 1,
</span><span class="result ok">//   to: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//   transactionHash: '0xe6a39827adf9c1a65fab139f30f68f85b398eab84971b7a838a56810ddcc75ff',
</span><span class="result ok">//   transactionIndex: 0,
</span><span class="result ok">//   type: 2
</span><span class="result ok">// }
</span>
<span class="comment">// After!
</span>formatUnits(await erc20_rw.balanceOf(signer.getAddress()));
<span class="result ok">// '98.77'
</span>
formatUnits(await erc20_rw.balanceOf("ricmoo.eth"));
<span class="result ok">// '1.23'
</span></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="path">callStatic</span><span class="symbol">.</span><span class="method">transfer</span><span class="symbol">(</span> <span class="param">target</span> <span class="symbol">,</span> <span class="param">amount</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">overrides</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; boolean &gt;</span><div class="anchors"></div></div><div class="body"><p>Performs a dry-run of transferring <i>amount</i> tokens to <i>target</i> from the current signer, without actually signing or sending a transaction.</p>

<p>This can be used to preflight check that a transaction will be successful.</p>

</div></div><div class="code"><span class="comment">// The signer has enough tokens to send, so true is returned
</span>await erc20_rw.callStatic.transfer("ricmoo.eth", parseUnits("1.23"));
<span class="result ok">// true
</span>
<span class="comment">// A random address does not have enough tokens to
</span><span class="comment">// send, in which case the contract throws an error
</span>erc20_random = erc20_rw.connect(randomWallet);
await erc20_random.callStatic.transfer("ricmoo.eth", parseUnits("1.23"));
<span class="result error">// [Error: missing revert data in call exception] {
</span><span class="result error">//   code: 'CALL_EXCEPTION',
</span><span class="result error">//   data: '0x',
</span><span class="result error">//   error: Error: processing response error (body="{\"jsonrpc\":\"2.0\",\"id\":71,\"error\":{\"code\":-32603,\"message\":\"Error: VM Exception while processing transaction: reverted with reason string 'insufficient token balance'\"}}", error={"code":-32603}, requestBody="{\"method\":\"eth_call\",\"params\":[{\"from\":\"0x840a9391fea66e1cc09608944dd42df7ac5530e9\",\"to\":\"0x0f33b7cad42da6a85bf3d4be9191a3cc6bf27f4d\",\"data\":\"0xa9059cbb0000000000000000000000005555763613a12d8f3e73be831dff8598089d3dca0000000000000000000000000000000000000000000000001111d67bb1bb0000\"},\"latest\"],\"id\":71,\"jsonrpc\":\"2.0\"}", requestMethod="POST", url="http://localhost:8545", code=SERVER_ERROR, version=web/5.5.1)
</span><span class="result error">//       at Logger.makeError (/Users/xiaonahe/Desktop/ethers.js/packages/logger/lib/index.js:199:21)
</span><span class="result error">//       at Logger.throwError (/Users/xiaonahe/Desktop/ethers.js/packages/logger/lib/index.js:208:20)
</span><span class="result error">//       at /Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:301:32
</span><span class="result error">//       at step (/Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:33:23)
</span><span class="result error">//       at Object.next (/Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:14:53)
</span><span class="result error">//       at fulfilled (/Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:5:58)
</span><span class="result error">//       at processTicksAndRejections (internal/process/task_queues.js:97:5) {
</span><span class="result error">//     body: `{"jsonrpc":"2.0","id":71,"error":{"code":-32603,"message":"Error: VM Exception while processing transaction: reverted with reason string 'insufficient token balance'"}}`,
</span><span class="result error">//     code: 'SERVER_ERROR',
</span><span class="result error">//     error: Error: Error: VM Exception while processing transaction: reverted with reason string 'insufficient token balance'
</span><span class="result error">//         at getResult (/Users/xiaonahe/Desktop/ethers.js/packages/providers/lib/json-rpc-provider.js:142:21)
</span><span class="result error">//         at processJsonFunc (/Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:344:22)
</span><span class="result error">//         at /Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:276:46
</span><span class="result error">//         at step (/Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:33:23)
</span><span class="result error">//         at Object.next (/Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:14:53)
</span><span class="result error">//         at fulfilled (/Users/xiaonahe/Desktop/ethers.js/packages/web/lib/index.js:5:58)
</span><span class="result error">//         at processTicksAndRejections (internal/process/task_queues.js:97:5) {
</span><span class="result error">//       code: -32603,
</span><span class="result error">//       data: undefined
</span><span class="result error">//     },
</span><span class="result error">//     reason: 'processing response error',
</span><span class="result error">//     requestBody: '{"method":"eth_call","params":[{"from":"0x840a9391fea66e1cc09608944dd42df7ac5530e9","to":"0x0f33b7cad42da6a85bf3d4be9191a3cc6bf27f4d","data":"0xa9059cbb0000000000000000000000005555763613a12d8f3e73be831dff8598089d3dca0000000000000000000000000000000000000000000000001111d67bb1bb0000"},"latest"],"id":71,"jsonrpc":"2.0"}',
</span><span class="result error">//     requestMethod: 'POST',
</span><span class="result error">//     url: 'http://localhost:8545'
</span><span class="result error">//   },
</span><span class="result error">//   reason: 'missing revert data in call exception'
</span><span class="result error">// }
</span></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="path">estimateGas</span><span class="symbol">.</span><span class="method">transfer</span><span class="symbol">(</span> <span class="param">target</span> <span class="symbol">,</span> <span class="param">amount</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">overrides</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; <a href="/v5/api/utils/bignumber/">BigNumber</a> &gt;</span><div class="anchors"></div></div><div class="body"><p>Returns an estimate for how many units of gas would be required to transfer <i>amount</i> tokens to <i>target</i>.</p>

</div></div><div class="code">await erc20_rw.estimateGas.transfer("ricmoo.eth", parseUnits("1.23"));
<span class="result ok">// { BigNumber: "34458" }
</span></div><div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="path">populateTransaction</span><span class="symbol">.</span><span class="method">transfer</span><span class="symbol">(</span> <span class="param">target</span> <span class="symbol">,</span> <span class="param">amount</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">overrides</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Promise&lt; <a href="/v5/api/utils/transactions/#UnsignedTransaction">UnsignedTx</a> &gt;</span><div class="anchors"></div></div><div class="body"><p>Returns an <a href="/v5/api/utils/transactions/#UnsignedTransaction">UnsignedTransaction</a> which could be signed and submitted to the network to transaction <i>amount</i> tokens to <i>target</i>.</p>

</div></div><div class="code">await erc20_rw.populateTransaction.transfer("ricmoo.eth", parseUnits("1.23"));
<span class="result ok">// {
</span><span class="result ok">//   data: '0xa9059cbb0000000000000000000000005555763613a12d8f3e73be831dff8598089d3dca0000000000000000000000000000000000000000000000001111d67bb1bb0000',
</span><span class="result ok">//   from: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//   to: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d'
</span><span class="result ok">// }
</span></div><div class="definition container-box note"><div class="term">Note on Estimating and Static Calling</div><div class="body"><p>When you perform a static call, the current state is taken into account as best as Ethereum can determine. There are many cases where this can provide false positives and false negatives. The eventually consistent model of the blockchain also means there are certain consistency modes that cannot be known until an actual transaction is attempted.</p>

</div></div><a name="erc20-meta-events"></a><a name="example-erc-20-contract--erc20-meta-events"></a><h2 class="show-anchors"><div>Meta-Class Filters<span class="inherits">(added at Runtime)</span><div class="anchors"><a class="self" href="/v5/api/contract/example/#erc20-meta-events"></a></div></div></h2><p>Since the Contract is a Meta-Class, the methods available here depend on the ABI which was passed into the <b>Contract</b>.</p>

<div class="property show-anchors"><div class="signature"><span class="path">erc20</span><span class="symbol">.</span><span class="path">filters</span><span class="symbol">.</span><span class="method">Transfer</span><span class="symbol">(</span> <span class="symbol">[</span> <span class="param">fromAddress</span> <span class="symbol">[</span> <span class="symbol">,</span> <span class="param">toAddress</span> <span class="symbol">]</span> <span class="symbol">]</span> <span class="symbol">)</span> <span class="arrow">&rArr;</span> <span class="returns">Filter</span><div class="anchors"></div></div><div class="body"><p>Returns a new Filter which can be used to <a href="/v5/api/contract/example/#erc20-queryfilter">query</a> or to <a href="/v5/api/contract/example/#erc20-events">subscribe/unsubscribe to events</a>.</p>

<p>If <i>fromAddress</i> is null or not provided, then any from address matches. If <i>toAddress</i> is null or not provided, then any to address matches.</p>

</div></div><div class="code-title"><div>query filter *from* events</div></div><div class="code">filterFrom = erc20.filters.Transfer(signer.address);
<span class="result ok">// {
</span><span class="result ok">//   address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//   topics: [
</span><span class="result ok">//     '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//     '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20'
</span><span class="result ok">//   ]
</span><span class="result ok">// }
</span>
<span class="comment">// Search for transfers *from* me in the last 10 blocks
</span>logsFrom = await erc20.queryFilter(filterFrom, -10, "latest");
<span class="result ok">// [
</span><span class="result ok">//   {
</span><span class="result ok">//     address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//     args: [
</span><span class="result ok">//       '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//       '0x5555763613a12D8F3e73be831DFf8598089d3dCa',
</span><span class="result ok">//       { BigNumber: "1230000000000000000" },
</span><span class="result ok">//       amount: { BigNumber: "1230000000000000000" },
</span><span class="result ok">//       from: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//       to: '0x5555763613a12D8F3e73be831DFf8598089d3dCa'
</span><span class="result ok">//     ],
</span><span class="result ok">//     blockHash: '0xe81a4efab651d041b0f76b26f9431dba64f98fc12155f49f959abd68fc9e60a1',
</span><span class="result ok">//     blockNumber: 156,
</span><span class="result ok">//     data: '0x0000000000000000000000000000000000000000000000001111d67bb1bb0000',
</span><span class="result ok">//     decode: [Function],
</span><span class="result ok">//     event: 'Transfer',
</span><span class="result ok">//     eventSignature: 'Transfer(address,address,uint256)',
</span><span class="result ok">//     getBlock: [Function],
</span><span class="result ok">//     getTransaction: [Function],
</span><span class="result ok">//     getTransactionReceipt: [Function],
</span><span class="result ok">//     logIndex: 0,
</span><span class="result ok">//     removeListener: [Function],
</span><span class="result ok">//     removed: false,
</span><span class="result ok">//     topics: [
</span><span class="result ok">//       '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//       '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20',
</span><span class="result ok">//       '0x0000000000000000000000005555763613a12d8f3e73be831dff8598089d3dca'
</span><span class="result ok">//     ],
</span><span class="result ok">//     transactionHash: '0xe6a39827adf9c1a65fab139f30f68f85b398eab84971b7a838a56810ddcc75ff',
</span><span class="result ok">//     transactionIndex: 0
</span><span class="result ok">//   }
</span><span class="result ok">// ]
</span>
<span class="comment">// Note that the args providees the details of the event, each
</span><span class="comment">// parameters is available positionally, and since our ABI
</span><span class="comment">// included parameter names also by name
</span>logsFrom[0].args
<span class="result ok">// [
</span><span class="result ok">//   '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//   '0x5555763613a12D8F3e73be831DFf8598089d3dCa',
</span><span class="result ok">//   { BigNumber: "1230000000000000000" },
</span><span class="result ok">//   amount: { BigNumber: "1230000000000000000" },
</span><span class="result ok">//   from: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//   to: '0x5555763613a12D8F3e73be831DFf8598089d3dCa'
</span><span class="result ok">// ]
</span></div><div class="code-title"><div>query filter with *to* events</div></div><div class="code">filterTo = erc20.filters.Transfer(null, signer.address);
<span class="result ok">// {
</span><span class="result ok">//   address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//   topics: [
</span><span class="result ok">//     '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//     null,
</span><span class="result ok">//     '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20'
</span><span class="result ok">//   ]
</span><span class="result ok">// }
</span>
<span class="comment">// Search for transfers *to* me in the last 10 blocks
</span><span class="comment">// Note: the contract transferred totalSupply tokens to us
</span><span class="comment">//       when it was deployed in its constructor
</span>logsTo = await erc20.queryFilter(filterTo, -10, "latest");
<span class="result ok">// [
</span><span class="result ok">//   {
</span><span class="result ok">//     address: '0x0f33B7CaD42da6A85BF3D4bE9191a3Cc6BF27F4d',
</span><span class="result ok">//     args: [
</span><span class="result ok">//       '0x0000000000000000000000000000000000000000',
</span><span class="result ok">//       '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//       { BigNumber: "100000000000000000000" },
</span><span class="result ok">//       amount: { BigNumber: "100000000000000000000" },
</span><span class="result ok">//       from: '0x0000000000000000000000000000000000000000',
</span><span class="result ok">//       to: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20'
</span><span class="result ok">//     ],
</span><span class="result ok">//     blockHash: '0xac72a683d46dc683fcd986b2e889fb05e9b52ccbdb26e97168cfa4a36c700432',
</span><span class="result ok">//     blockNumber: 155,
</span><span class="result ok">//     data: '0x0000000000000000000000000000000000000000000000056bc75e2d63100000',
</span><span class="result ok">//     decode: [Function],
</span><span class="result ok">//     event: 'Transfer',
</span><span class="result ok">//     eventSignature: 'Transfer(address,address,uint256)',
</span><span class="result ok">//     getBlock: [Function],
</span><span class="result ok">//     getTransaction: [Function],
</span><span class="result ok">//     getTransactionReceipt: [Function],
</span><span class="result ok">//     logIndex: 0,
</span><span class="result ok">//     removeListener: [Function],
</span><span class="result ok">//     removed: false,
</span><span class="result ok">//     topics: [
</span><span class="result ok">//       '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
</span><span class="result ok">//       '0x0000000000000000000000000000000000000000000000000000000000000000',
</span><span class="result ok">//       '0x0000000000000000000000002143af6436d9ff82b5327fc94066a522b9cfac20'
</span><span class="result ok">//     ],
</span><span class="result ok">//     transactionHash: '0xe398d009f6289cf3cbcbd44eafda048498335ec0d8a4a252552144b91c7c4b81',
</span><span class="result ok">//     transactionIndex: 0
</span><span class="result ok">//   }
</span><span class="result ok">// ]
</span>
<span class="comment">// Note that the args providees the details of the event, each
</span><span class="comment">// parameters is available positionally, and since our ABI
</span><span class="comment">// included parameter names also by name
</span>logsTo[0].args
<span class="result ok">// [
</span><span class="result ok">//   '0x0000000000000000000000000000000000000000',
</span><span class="result ok">//   '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20',
</span><span class="result ok">//   { BigNumber: "100000000000000000000" },
</span><span class="result ok">//   amount: { BigNumber: "100000000000000000000" },
</span><span class="result ok">//   from: '0x0000000000000000000000000000000000000000',
</span><span class="result ok">//   to: '0x2143AF6436D9Ff82b5327Fc94066a522b9CFac20'
</span><span class="result ok">// ]
</span></div><div class="code-title"><div>listen for events</div></div><div class="code"><span class="comment">// Listen to incoming events from signer:
</span>erc20.on(filterFrom, (from, to, amount, event) =&gt; {
<span class="comment">  // The `from` will always be the signer address
</span>});

<span class="comment">// Listen to incoming events to signer:
</span>erc20.on(filterTo, (from, to, amount, event) =&gt; {
<span class="comment">  // The `to` will always be the signer address
</span>});

<span class="comment">// Listen to all Transfer events:
</span>erc20.on("Transfer", (from, to, amount, event) =&gt; {
<span class="comment">  // ...
</span>});
</div>

      <div class="footer">
        <div class="nav previous"><a href="/v5/api/contract/contract-factory/"><span class="arrow">&larr;</span>ContractFactory</a></div>
        <div class="nav next"><a href="/v5/api/utils/">Utilities<span class="arrow">&rarr;</span></a></div>
      </div>
      <div class="copyright">The content of this site is licensed under the <a href="https://choosealicense.com/licenses/cc-by-4.0/">Creative Commons License</a>. Generated on December 24, 2021, 5:7pm.</div>
    </div>
    <script src="/v5/static/script.js" type="text/javascript"></script>
    <!--EXTRASCRIPT-->
  </body>
</html>
